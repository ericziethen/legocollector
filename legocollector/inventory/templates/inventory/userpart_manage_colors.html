
{% extends "base.html" %}
{% load static %}

{% block content %}

    <h1>{{ userpart }}</h1>
    <form method="post">{% csrf_token %}
        <h2>Colors</h2>
     <table class="table">
            {{ inventory_list.management_form }}

            {% for form in inventory_list.forms %}
                {% if forloop.first %}
                    <thead>
                    <tr>
                        {% for field in form.visible_fields %}
                            <th>{{ field.label|capfirst }}</th>
                        {% endfor %}
                    </tr>
                    </thead>
                {% endif %}
                <tr class="{% cycle 'row1' 'row2' %} formset_row">
                    {% for field in form.visible_fields %}
                        <td>
                            {# Include the hidden fields in the form #}
                            {% if forloop.first %}
                                {% for hidden in form.hidden_fields %}
                                    {{ hidden }}
                                {% endfor %}
                            {% endif %}
                            {{ field.errors.as_ul }}
                            {{ field }}
                            {{ form.fieldname.errors|striptags }}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>

        {% if inventory_list.non_form_errors %}
            {% for error in inventory_list.non_form_errors %}
                {{ error|escape }}
            {% endfor %}
        {% endif %}

        <input type="submit" value="Save">
    </form>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="{% static 'formset/jquery.formset.js' %}"></script>
    <script type="text/javascript">
        function removed(row) {
            // console.log(row);
            // var x = $(row);
            // var y = x['0'].getElementsByTagName('select');
            // console.log(y.material_select())
            // x.getElementsByTagName('')
            // $('select').material_select();
        }

        $('.formset_row').formset({
            addText: 'add Color',
            deleteText: 'remove',
            prefix: 'inventory_list_set',
            removed: removed  // Custom Handler WHen Removed is pressed
        });
    </script>

    <input type="button" class="button_active" value="Cancel" onclick="location.href='{% url "userpart_detail" userpart.pk %}';" />


{% endblock content %}
