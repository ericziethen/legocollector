
{% extends "base.html" %}
{% load static %}

{% block content %}

    <h1>{{ userpart }}</h1>
    <form method="post">{% csrf_token %}

    {% if inventory_list.non_form_errors %}
        {% for error in inventory_list.non_form_errors %}
            <h1>{{ error|escape }}</h1>
        {% endfor %}
    {% endif %}

    <h2>Colors</h2>
    <table class="table">
        {{ inventory_list.management_form }}

        {% for form in inventory_list.forms %}
            {% if forloop.first %}
                <thead>
                <tr>
                    {% for field in form.visible_fields %}
                        <th>{{ field.label|capfirst }}</th>
                    {% endfor %}
                </tr>
                </thead>
            {% endif %}
            <tr class="{% cycle 'row1' 'row2' %} formset_row">
                {% for field in form.visible_fields %}
                    <td>
                        {# Include the hidden fields in the form #}
                        {% if forloop.first %}
                            {% for hidden in form.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                        {% endif %}
                        {{ field.errors.as_ul }}

                        {% if field.label == "Rgb" and field.value %}
                            <!--{{field.value}}-->
                            <p class="rgb" style="background-color:#{{ field.value }}">{{ field.value }}</p>
                        {% else %}
                            {{ field }}
                        {% endif %}
                        {{ form.fieldname.errors|striptags }}
                    </td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table>

        <input type="submit" value="Save">
    </form>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="{% static 'formset/jquery.formset.js' %}"></script>
    <script type="text/javascript">
        function removed(row) {
            // console.log(row);
            // var x = $(row);
            // var y = x['0'].getElementsByTagName('select');
            // console.log(y.material_select())
            // x.getElementsByTagName('')
            // $('select').material_select();
        }

        $('.formset_row').formset({
            addText: 'add Color',
            deleteText: 'remove',
            prefix: 'inventory_list_set'
        });
    </script>

    <script type="text/javascript">
        $("#id_form-5-color").on("change", function(row) {
            console.log('Eric is here');
            console.log(row);
            console.log(document.getElementById("id_form-5-color"));
            // TODO - Maybe can use a filter to get the RGB Value
            document.getElementById("id_form-5-rgb").value = "My value";
            document.getElementById("id_form-5-rgb").setAttribute("style", "background-color: red;");
        });
    </script>

    <input type="button" class="button_active" value="Cancel" onclick="location.href='{% url "userpart_detail" userpart.pk %}';" />


{% endblock content %}
